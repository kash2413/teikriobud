(function(_,$){"use strict";var window=_;if($.colorbox){$(".fs-view").colorbox({rel:"company-medium",maxHeight:"90%",maxWidth:"90%"})}$(function($){$("span.stars").each(function(index,stars){new Rating($(stars))});var $spsex=$(".sposob.external a");if($spsex.length){$spsex.each(function(){var $href=$(this).attr("href");if(!$href.match(/^http\:\/\/www\.wszelkieprzepisy/g)){$(this).addClass("ext")}})}if($(window).width()>767&&$(window).width()<1025){if($(".medium-wrapper .pair")[0]){var $h1=$(".medium-wrapper .pair:first-child").height();var $h2=$(".medium-wrapper .pair:nth-child(2)").height();if($h1<$h2){$(".medium-wrapper .pair:first-child .przepis-medium").css("margin-bottom",$h2-$h1+10)}else if($h2<$h1){$(".medium-wrapper .pair:nth-child(2) .przepis-medium").css("margin-bottom",$h1-$h2+10)}}}$(".new-category").click(function(){$(".add-category").slideDown()});$(".new-keyword").click(function(){$(".add-keyword").slideDown()});$(".btn-category").click(function(){var value=$("#newCategory").val();var url=$(this).data("url");$.post(url,{value:value},function(res){var $infoCategory=$(".info-category");if(!res.success){$infoCategory.text(res.error)}else{var $categoryId=$("#category_id");$categoryId.append("<option value='"+res.id+"'>"+res.name+"</option>");$categoryId.val(res.id).trigger("change");$infoCategory.text("Dodano danie.")}$infoCategory.slideDown()})});$(".btn-keyword").click(function(){var value=$("#newKeyword").val();var url=$(this).data("url");$.post(url,{value:value},function(res){var $infoKeyword=$(".info-keyword");if(!res.success){$infoKeyword.text(res.error)}else{var $keywordIds=$("#keyword_ids");$keywordIds.append("<option value='"+res.id+"'>"+res.name+"</option>");var val=$keywordIds.val();if(val==null){$keywordIds.val([res.id]).trigger("change")}else{$keywordIds.val(val.concat(res.id)).trigger("change")}$infoKeyword.text("Dodano słowo kluczowe.")}$infoKeyword.slideDown()})});$("#inputPhoto").bind("change",function(e){if(this.files[0].size>1e7){$(this).val(null);e.preventDefault();if(!$(".photo .controls p.error")[0]){$(".photo .controls").append("<p class='error'>Za duży rozmiar zdjęcia. Wybierz ponownie.</p>")}}else{$(".photo .controls p.error").hide()}})});var STAR_SRC_MARKED="/images/mark_star.png";var STAR_SRC_CLEAN="/images/star.png";function Rating($stars){var currentRating=$stars.data("rating"),images=$stars.find("input");function showRating(rating){rating=_.Math.floor(rating);images.each(function(index,img){img.src=index+1<=rating?STAR_SRC_MARKED:STAR_SRC_CLEAN})}function resetRating(){showRating(currentRating)}$stars.on("mouseenter","input",function(){showRating($(this).val())});$stars.on("mouseleave",function(){resetRating()})}})(window,jQuery);
